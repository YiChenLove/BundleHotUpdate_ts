{"version":3,"sources":["assets/ABLobby/root/Script/LobbyRoot.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sEAAiE;AAEjE,IAAI,MAAM,GAAG;IAAS,aAAM;SAAN,UAAM,EAAN,qBAAM,EAAN,IAAM;QAAN,wBAAM;;IACxB,EAAE,CAAC,GAAG,OAAN,EAAE,kBAAK,aAAa,GAAI,GAAG,GAAG;AAClC,CAAC,CAAA;AACK,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAY;IAAnD;;IAgFA,CAAC;IA3EG,8BAAU,GAAV;QACC,MAAM,CAAC,YAAY,CAAC,CAAA;IACrB,CAAC;IAED,oCAAgB,GAAhB;QAAA,iBA0BC;QAzBA,MAAM,CAAC,kBAAkB,CAAC,CAAA;QAC1B,IAAI,CAAC,YAAY,EAAE,CAAA;QAEnB,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,UAAC,SAAS;YACxC,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAA;YAE1B,KAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,EAAE,CAAC,MAAM,EAAE,UAAC,GAAG,EAAE,MAAM;gBACrD,MAAM,CAAC,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAE,CAAA;gBACnD,IAAI,KAAK,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;gBAClC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;gBAC9B,KAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBACnB,KAAK,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,EAAC,SAAS,EAAC,KAAI,EAAC,CAAC,CAAA;YAEhE,CAAC,CAAC,CAAA;QACT,CAAC,CAAC,CAAA;QAIC,YAAY;QACZ,iDAAiD;QACjD,sCAAsC;QACtC,qEAAqE;QACrE,YAAY;QACZ,MAAM;IAEV,CAAC;IAED,gCAAY,GAAZ;QACC,IAAG,IAAI,CAAC,MAAM,EAAC;YACd,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAA;SACrB;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;IACnB,CAAC;IAGD,oCAAgB,GAAhB;QAAA,iBAgBC;QAfA,MAAM,CAAC,kBAAkB,CAAC,CAAA;QAC1B,IAAI,CAAC,YAAY,EAAE,CAAA;QACnB,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,UAAC,SAAS;YACxC,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAA;YAE1B,KAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,EAAE,CAAC,MAAM,EAAE,UAAC,GAAG,EAAE,MAAM;gBACrD,MAAM,CAAC,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAE,CAAA;gBACnD,IAAI,KAAK,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;gBAClC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;gBAC9B,KAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBACnB,KAAK,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,EAAC,SAAS,EAAC,KAAI,EAAC,CAAC,CAAA;YAEhE,CAAC,CAAC,CAAA;QACT,CAAC,CAAC,CAAA;IAEH,CAAC;IACD,gCAAY,GAAZ;QACC,IAAG,IAAI,CAAC,MAAM,EAAC;YACd,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAA;SACrB;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;IAEnB,CAAC;IAGD,+BAAW,GAAX,UAAY,MAAM,EAAE,QAAQ;QACxB,uBAAa,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,EAAC;YAEtD,uBAAa,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,EAAE,UAAC,SAAS;gBACpD,QAAQ,CAAC,SAAS,CAAC,CAAA;YACvB,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAA;IACN,CAAC;IA9EgB,SAAS;QAD7B,OAAO;OACa,SAAS,CAgF7B;IAAD,gBAAC;CAhFD,AAgFC,CAhFsC,EAAE,CAAC,SAAS,GAgFlD;kBAhFoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import BundleManager from \"../../../Script/bundle/BundleManager\";\n\nlet JS_LOG = function(...arg){ \n    cc.log(\"[LobbyRoot]\",...arg) ; \n}\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class LobbyRoot extends cc.Component {\n    _game1: any;\n    _game2: any;\n\n\n    initModule(){\n    \tJS_LOG(\"initModule\")\n    }\n\n    onBtn_loadGame_1(){\n    \tJS_LOG(\"onBtn_loadGame_1\")\n    \tthis.removeGame_1()\n\n    \tthis.loadSubGame(\"ABSubGame1\", (moduleObj)=>{\n    \t\tlet abObj = moduleObj.getABObj()\n                \n            abObj.load('root/Scene/SubGame1', cc.Prefab, (err, prefab)=>{\n                JS_LOG(\"load_game1_prefab_:\", JSON.stringify(err) ) \n                let _node = cc.instantiate(prefab) \n                this.node.addChild(_node, 100)\n                this._game1 = _node\n                _node.getComponent(\"SubGame_1\").initModule({lobbyRoot:this})    \n\n            }) \n    \t})\n\n\n\n        // 模块内加载自身资源\n        // let module = _G_bundleMgr.getModule(\"ABLobby\")\n        // let assetBundle = module.getABObj()\n        // assetBundle.load('root/Scene/xxx', cc.Prefab, (err, prefab)=>{    \n        //     //...\n        // }) \n\n    }\n\n    removeGame_1(){\n    \tif(this._game1){\n    \t\tthis._game1.destroy()\n    \t}\n    \tthis._game1 = null\n    }\n\n\n    onBtn_loadGame_2(){\n    \tJS_LOG(\"onBtn_loadGame_2\")\n    \tthis.removeGame_2()\n    \tthis.loadSubGame(\"ABSubGame2\", (moduleObj)=>{\n    \t\tlet abObj = moduleObj.getABObj()\n                \n            abObj.load('root/Scene/SubGame2', cc.Prefab, (err, prefab)=>{\n                JS_LOG(\"load_game2_prefab_:\", JSON.stringify(err) ) \n                let _node = cc.instantiate(prefab) \n                this.node.addChild(_node, 100)\n                this._game2 = _node\n                _node.getComponent(\"SubGame_2\").initModule({lobbyRoot:this})    \n\n            }) \n    \t})\n\n    }\n    removeGame_2(){\n    \tif(this._game2){\n    \t\tthis._game2.destroy()\n    \t}\n    \tthis._game2 = null\n\n    }\n\n\n    loadSubGame(abName, callback){ \n        BundleManager.getInstance().hotUpdateMultiModule([abName],()=>{\n\n            BundleManager.getInstance().addModule(abName, (moduleObj)=>{\n                callback(moduleObj)\n            })\n        })\n    }\n\n}"]}